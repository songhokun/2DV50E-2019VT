This section provides an analysis of the survey results.

Classification of DNS Privacy methods could further be analysed based on the which privacy risk these address. S. Bortzmeyer identified risk area of DNS privacy in RFC 7626 as the followings \cite{rfc7626}: 
\begin{enumerate}
    \item Data in the DNS request
    \item On the wire
    \item In the servers
    \item Re-identification and other Interferences
\end{enumerate}
Following sections analyse privacy risk mitigations based on risk area and type of mitigation strategies as a whole. Concent, privacy and performance analysis of each mitigative method can be found in \cite{van2018privacy}.

\subsection{Two phases of DNS Query process}
For the conciseness of further analysis, the communication channel (transport channel) of DNS are abstracted into two phases or paths based on the DNS Query process.

\textbf{Phase 1} refers to step 1 and 10 of Figure \ref{queryprocess}. These two steps are performed in the DNS Query process when stub resolver queries a domain name to the recursive resolver and the recursive resolver replies to the stub resolver.
Channel-wise, it is denoted as a \textbf{stub-to-resolver link}.

\textbf{Phase 2} refers to the steps in the Figure \ref{queryprocess} where a recursive resolver finds the final answer to the queried address, by recursively reaching to concerning authoritative servers. In other words, the channel that the rest of the steps is performed is called \textbf{recursive-to-auth link}.

\subsubsection{Insufficient measurements on recursive-to-auth link}
The distinction of the two phases are noteworthy, as the current implementations that preserve DNS hierarchical structure do not secure all communication paths towards all involved parties of the DNS resolving.
As an example, the majority of the methods do not encrypt communications on Phase 2 (recursive-to-auth link) in contrast to Phase 1 (stub-to-resolver link).
The fact that an authoritative server having a one-to-many server-client relationship from the recursive resolvers is the major obstacle of applying encryption on Phase 2.

As a further explanation of one-to-many relationship being an obstacle, DoH \cite{rfc8484} and DoT \cite{hu2016specification} use Transport Layer Security (TLS) protocol \cite{rfc7858} for encryption. In the case an authoritative server process multiple TLS session, it is likely to end up exhausting its computational resources \cite{bhople2012server}, similar to a Distributed DoS (DDoS) attack situation. The internet draft ``Next step for DPRIVE: resolver-to-auth link \cite{I-D.bortzmeyer-dprive-step-2}'' discusses the aforementioned challenges.

Furthermore, authentication mechanisms are missing on Phase 2 \cite{I-D.bortzmeyer-dprive-step-2}, and the lack of authentication of the authoritative server may potentially enable a Man-in-the-middle attack (MITM).
Therefore, the location of the DNS resolver needs to be considered when to mention the limitations of each suggested methods.
% There are proposal of utilising TLS 1.3 and 

\subsubsection{Location of Recursive DNS resolvers}
\input{tex/analysis_RR_location.tex}
\FloatBarrier

\subsection{Prevalence of hierarchical DNS}
Although the primary focus of the study is made on Domain Name resolving part, DNS resolving is only a portion of the entire DNS, as there are diverse actors (such as administrators, domain owners) involved in the system.
Figure \ref{dnsactors}, which is presented by SUNET \cite{SUNET-DNS}, illustrates the involved machines and servers of the system as a whole.

\begin{figure}[h!]
    \begin{center}
    \includegraphics*[width=1\columnwidth]{img/DNS-maskinvara}
    \end{center}
    \caption{Parties involved in DNS as a whole \cite{SUNET-DNS}}
    \label{dnsactors}
\end{figure}

In the figure, sections are vertically divided.
The figure in the first column represents organisations or individuals that desire to acquire a new domain name.
The third column of the figure demonstrates administrators of delegation on each autonomous domain hierarchy.
Legacy of the system are often neglected in attempts of securing the domain name resolution process, which is presented in green colour in the figure. 

The naming hierarchy of the DNS ``ties into systems such as the Public Key Infrastructure (PKI) \cite{akamai-dns-architecture}'', and architecture of decentralised DNS, such as NameCoin \cite{loibl2014namecoin}, may have not considered the PKI structure in its design.

\subsubsection{Privacy analysis of Namecoin}
Preserving user privacy in Namecoin requires ``replication of the full blockchain at the user's end system \cite{grothoff2017nsa}'' and performing such received a criticism that it ``may be impractical for some devices \cite{grothoff2017nsa}.''
The criticism can be interpreted as applying blockchain did not add significant value, in terms of preserving the privacy of users, as privacy breaches in DNS resolving process could also be addressed if DNS records could be replicated on a client's system even in the existing hierarchical system. 

\subsubsection{Privacy analysis of GNS}
Authors of the GNS claim that domain resolving process of the GNS is private because ``queries and responses are encrypted \cite{grothoff2017nsa, wachs2014censorship}.''
However, its confidentiality is vulnerable for `confirmation attack' if ``the adversary knows both the public key of the zone and the specific label \cite{wachs2014censorship}.'' Note that the label refers to an entry in a petname system. 

\subsubsection{The integrity of the DNS records}
Ensuring the integrity of the DNS record is significant, and it is evident from `phishing attacks \cite{ariyapperuma2007security, ollmann2004phishing}'.
Per contra, radical protocol design proposals may harm the integrity of the DNS records, as its proof-censorship or legal-attack-proof designs may enable everyone can claim the legitimacy of ownership of the specific domain.

Solutions using DHT in its design may put the system vulnerable to possible Sybil attacks \cite{6503215, SitE2002Scfp}.
Sybil attacks are a type of attack scenario where an attacker `subverts the reputation system by creating a considerable amount of pseudonymous identities \cite{TRIFA20141135}' `in the absence of identification authority \cite{douceur2002sybil}.'

Interventing the malvaceous records are more challenging than the hierarchical structure of the current DNS system in the decentralised design, and this could lead to concerns of enabling phishing attacks.
Enhancing confidentiality aspects of DNS security is important but it should not compromise the integrity aspect.



\subsubsection{The availability of the DNS Service}
There are several criteria to define availability. The criteria for defining availability introduced by Pfleeger are (1) having a timely response to a given request, (2) ensuring fair allocation of resources and (3) being fault-tolerant \cite{securityincomputing}.
This report defines availability as a chosen recursive resolver to resolve the queried address and provide the correct IP address promptly.

High availability of DNS is important since web activities cannot be initiated without name resolution (as mentioned in Section \ref{dns-introduction}). High performance (performance refers to having a low latency) of DNS is also an important factor to consider because DNS resolutions are a significant cause of having log Web waits \cite{cohen2003proactive, jung2002dns}, and it has a notable impact on `User-perceived latency'.


\subsection{Privacy leaks by Transitive trust}
Shulman demonstrated that `straightforward application of the encryption alone may not suffice \cite{Shulman:2014}' for protecting DNS Privacy due to possible disruption of DNS Availability and privacy leaks caused by `transitive trust \cite{Ramasubramanian:2005}'.
Shulman further analysed transtive trust as (1) \textit{fan-out} and (2) \textit{chain-length}.
Chain-length refers to ``A number of name servers involved in a resolution of a record that initiates the chain'' and fan-out as ``number of (transitive-trust) chains involved in a resolution of a domain name'' \cite{Shulman:2014}.

Transitive trust at authoritative servers possess a potential risk of revealing the query and client. While DNS QName minimisation \cite{bortzmeyer2016dns} limits the scope of the query name leaks, the extensified usage of DNS in Content Delivery Network (CDN) context \cite{WANG2018235} may have increased the chain-length and it leads to the intercoperation issues \cite{Huque-QNAME-Min-analysis}.

\subsection{Observation on packets' size}
